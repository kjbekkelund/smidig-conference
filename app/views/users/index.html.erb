<h2>Brukere</h2>


<%=
  x_labels = (0...@date_range.length).select { |i| i%10 == 0 }.collect { |i| @date_range[i].strftime("%d %b") }
  line_chart_xy = GoogleChart::LineChart.new('600x300', "Users per day", false) do |lc|
    lc.axis :y, :range => [0,@all_per_date.max]
    lc.axis :x, :labels => x_labels
    lc.data "Users per day", @all_per_date, '0000ff'
    lc.data "Speakers per day", @speakers_per_date, '00ff00'
    lc.data "Paid users per day", @paid_per_date, 'ff0000'
  end
  image_tag line_chart_xy.to_url
%>
            

<ul>
  <li><%= link_to "Alle", :filter => 'all' %></li>
  <li><%= link_to "Foredragsholdere", :filter => 'speakers' %></li>
  <li><%= link_to "Betalte", :filter => 'paid' %></li>
  <li><%= link_to "Betaling avbrudt", :filter => 'unpaid' %></li>
  <li><%= link_to "Foredragsholdere som har betalt", :filter => 'paying_speaker' %></li>
  <li><%= link_to "Administratorer", :filter => 'admin' %></li>
</ul>

<h3><%= @users.length %> brukere:</h3>

<table>
  <tr>
    <th>Bruker</th>
    <th>E-post</th>
    <th>PÃ¥meldt</th>
    <th>Brukerstatus</th>
  </tr>
<% for user in @users %>
  <tr>
    <td>
      <%=link_to user.name, user %>
      (<%=h user.company %>)
    </td>
    <td>
      <%=link_to user.email, "mailto:#{user.email}" %>
    </td>
    <td><%=h time_ago_in_words(user.created_at) %> siden</td>
    <td>
      <% if user.registration %>
        Status: <%= user.registration.paid? ? "betalt" : "ikke betalt" %>
        <%=h user.registration.description %>
        Price: <%= user.registration.price %>.
      <% elsif user.is_admin %>
        Status: Administratror
      <% end %>
      <% if not user.talks.empty? %>
        Status: Foredragsholder
      <% end %>
    </td>
  </tr>
<% end %>
</table>

